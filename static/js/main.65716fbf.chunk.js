(this["webpackJsonpreact-task-manager"]=this["webpackJsonpreact-task-manager"]||[]).push([[0],{54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),s=a.n(r),c=a(23),i=a.n(c),o=a(2),l=a.n(o),d=a(3),u=a(5),h=a(6),p=a(8),k=a(7),f={ALL:"all",OVERDUE:"overdue",TODAY:"today",FAVORITES:"favorites",REPEATING:"repeating",ARCHIVE:"archive"},b={DEFAULT:"default",DATE_UP:"date-up",DATE_DOWN:"date-down"},j=["pink","yellow","green","black","blue"],_="show",v="edit",m="add",O="network";function x(e){for(var t=0,a=Object.values(e);t<a.length;t++){if(a[t])return!0}return!1}function g(e){return null!==e}function C(e){if(!e)return!1;var t=new Date;return new Date(e)<t}function T(e){if(null===e)return!1;e=new Date(e);var t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1),n=new Date(t.getFullYear(),t.getMonth(),t.getDate());return e<a&&e>=n}function w(e,t){var a=e.due_date,n=t.due_date;return a||n?null===a?1:null===n?-1:new Date(n)-new Date(a):0}function y(e,t){var a=e.due_date,n=t.due_date;return a||n?null===a?1:null===n?-1:new Date(a)-new Date(n):0}function N(e){var t=new Map([["blue","rgba(0, 0, 255, 0.5)"],["green","rgba(0, 255, 0, 0.5)"],["pink","rgba(238, 0, 255, 0.5)"],["yellow","rgba(255, 255, 0, 0.5)"],["black","rgba(0, 0, 0, 0.5)"]]);return e.map((function(e){return t.get(e.toLowerCase())}))}var D=a(24),S=a.n(D).a.create({baseURL:"https://11.ecmascript.pages.academy/task-manager",headers:{Authorization:"Basic ".concat("witod1varo_genius")}}),A=function(){function e(){var t=this;Object(u.a)(this,e),this.receiveTasksData=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("/tasks").then((function(e){var a=e.data;t._tasks=a}),(function(e){console.error("Network error happend when app tried to receive tasks."),t._tasks=null}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.updateTask=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({method:"PUT",url:"/tasks/".concat(t.id),data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addTask=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({method:"POST",url:"/tasks",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteTask=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({method:"DELETE",url:"/tasks/".concat(t.id)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._tasks=[]}return Object(h.a)(e,[{key:"getTasks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filter,a=e.sortType;if(!this._tasks)return null;t||(t=f.ALL);var n=function(e){return!1};switch(t){case f.ALL:n=function(e){return!e.is_archived};break;case f.OVERDUE:n=function(e){return!e.is_archived&&C(e.due_date)};break;case f.TODAY:n=function(e){return!e.is_archived&&T(e.due_date)};break;case f.FAVORITES:n=function(e){return!e.is_archived&&e.is_favorite};break;case f.REPEATING:n=function(e){return!e.is_archived&&x(e.repeating_days)};break;case f.ARCHIVE:n=function(e){return e.is_archived}}a||(a=b.DEFAULT);var r=null;switch(a){case b.DATE_DOWN:r=w;break;case b.DATE_UP:r=y;break;case b.DEFAULT:r=function(){return 0}}var s=this._tasks.slice().filter(n).sort(r);return s}}]),e}(),E=function(e){Object(p.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).tasksRef=Object(r.createRef)(),e.handleAddNewTaskClick=function(t){e.tasksRef.current.checked="true",e.props.onAddNewTaskClick(t)},e}return Object(h.a)(a,[{key:"render",value:function(){return Object(n.jsx)(s.a.Fragment,{children:Object(n.jsxs)("section",{className:"control__btn-wrap",children:[Object(n.jsx)("input",{type:"radio",name:"control",id:"control__new-task",className:"control__input visually-hidden",onClick:this.handleAddNewTaskClick}),Object(n.jsx)("label",{htmlFor:"control__new-task",className:"control__label control__label--new-task",children:"+ ADD NEW TASK"}),Object(n.jsx)("input",{type:"radio",name:"control",id:"control__task",className:"control__input visually-hidden",onClick:this.props.onTasksClick,defaultChecked:!0,ref:this.tasksRef}),Object(n.jsx)("label",{htmlFor:"control__task",className:"control__label",children:"TASKS"}),Object(n.jsx)("input",{type:"radio",name:"control",id:"control__statistic",className:"control__input visually-hidden",onClick:this.props.onStatisticsClick}),Object(n.jsx)("label",{htmlFor:"control__statistic",className:"control__label",children:"STATISTICS"})]})})}}]),a}(r.Component),M=function(e){Object(p.a)(a,e);var t=Object(k.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"renderFilters",value:function(){var e=this;return Object.values(f).map((function(t){var a=null;a=e.props.taskModel&&e.props.taskModel.getTasks()?e.props.taskModel.getTasks({filter:t}).length:0;var r=e.props.currentFilter===t;return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("input",{type:"radio",id:"filter__".concat(t),className:"filter__input visually-hidden",name:"filter",defaultChecked:r,onClick:function(){return e.props.onFilterClick(t)},disabled:0===a||e.props.showStats}),Object(n.jsxs)("label",{htmlFor:"filter__".concat(t),className:"filter__label",children:[t," ",Object(n.jsx)("span",{className:"filter__all-count",children:a})]})]},"FILTER ".concat(t))}))}},{key:"render",value:function(){return Object(n.jsx)("section",{className:"main__filter filter container",children:this.renderFilters()})}}]),a}(r.Component);var F=function(e){var t=e.onLoadMoreButtonClick;return Object(n.jsx)("button",{className:"load-more",type:"button",onClick:t,children:"load more"})},R=a(9),B=a(12),L=a.n(B);var I=function(e){var t=e.task,a=e.onArchiveButtonClick,s=e.onFavoriteButtonClick,c=e.onEditButtonClick,i=Object(r.useState)(!1),o=Object(R.a)(i,2),u=o[0],h=o[1],p=Object(r.useState)(!1),k=Object(R.a)(p,2),f=k[0],b=k[1],j=Object(r.useRef)(),_=t.color,v=t.description,m=t.is_archived,O=t.is_favorite,T=t.repeating_days,w=t.due_date,y="card__btn--disabled",N=function(){var e=Object(d.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),h(!0),e.next=4,s(t).catch((function(){console.error("Network error happened.")}));case 4:j.current&&h(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),b(!0),e.next=4,a(t).catch((function(e){console.error("Network error happened.")}));case 4:j.current&&b(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=g(w)?Object(n.jsx)("div",{className:"card__details",children:Object(n.jsx)("div",{className:"card__dates",children:Object(n.jsx)("div",{className:"card__date-deadline",children:Object(n.jsxs)("p",{className:"card__input-deadline-wrap",children:[Object(n.jsx)("span",{className:"card__date",children:L()(w).format("DD MMMM")}),Object(n.jsx)("span",{className:"card__time",children:L()(w).format("hh:mm A")})]})})})}):null,A=!!g(w)&&C(w);return Object(n.jsx)("article",{className:"card card--".concat(_," ").concat(x(T)?"card--repeat":""," ").concat(A?"card--red card--deadline":""),ref:j,children:Object(n.jsx)("div",{className:"card__form",children:Object(n.jsxs)("div",{className:"card__inner",children:[Object(n.jsxs)("div",{className:"card__control",children:[Object(n.jsx)("button",{type:"button",className:"card__btn card__btn--edit",onClick:function(){return c(t)},children:"edit"}),Object(n.jsx)("button",{type:"button",className:"card__btn card__btn--archive ".concat(m&&!f||m?y:""),onClick:D,children:f?"archiving..":"archive"}),Object(n.jsx)("button",{type:"button",className:"card__btn card__btn--favorites ".concat(O&&!u||O?y:""),onClick:N,children:u?"favoriting..":"favorites"})]}),Object(n.jsx)("div",{className:"card__color-bar",children:Object(n.jsx)("svg",{className:"card__color-bar-wave",width:"100%",height:"10",dangerouslySetInnerHTML:{__html:'<use xlink:href="#wave"></use>'}})}),Object(n.jsx)("div",{className:"card__textarea-wrap",children:Object(n.jsx)("p",{className:"card__text",children:v})}),Object(n.jsx)("div",{className:"card__settings",children:S})]})})})},U=a(25),P=(a(52),a(13)),V={mo:!1,tu:!1,we:!1,th:!1,fr:!1,sa:!1,su:!1},Y={color:"black",description:"",due_date:null,is_archived:!1,is_favorite:!1,repeating_days:V};var J=function(e){Object(p.a)(a,e);var t=Object(k.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).flatpickr=null,n.dateInputRef=s.a.createRef(),n.handleEscClick=function(e){"Escape"===e.key&&n.props.onEditCancel()},n.handleDescriptionChange=function(e){var t=Object.assign({},n.state.task,{description:e.target.value});n.setState({task:t})},n.handleSaveButtonClick=function(e){e.preventDefault();var t=Object.assign({},n.state.task);if(!n.state.showRepeat){var a=Object.assign({},V);t=Object.assign({},t,{repeating_days:a})}var r=n.state.showDate?new Date(n.state.task.due_date||new Date):null;t=Object.assign({},t,{due_date:r}),n.setState({isSaving:!0}),n.props.onSaveButtonClick(t)},n.handleDeleteButtonClick=function(e){e.preventDefault(),n.setState({isDeleting:!0}),n.props.onDeleteButtonClick(n.state.task)},n.handleDayClick=function(e){var t=Object.assign({},n.state.task.repeating_days,e),a=Object.assign({},n.state.task,{repeating_days:t});n.setState({task:a})},n.handleShowRepeatClick=function(){n.setState({showRepeat:!n.state.showRepeat})},n.handleShowDateClick=function(){var e=!n.state.showDate,t=n.state.task;e||(t=Object.assign({},n.state.task,{due_date:null})),n.setState({showDate:e,task:t})},n.handleDateChange=function(e){var t=Object(R.a)(e,1)[0],a=Object.assign({},n.state.task,{due_date:t});n.setState({task:a})},n.handleColorPick=function(e){var t=Object.assign({},n.state.task,{color:e});n.setState({task:t})};var r=JSON.parse(JSON.stringify(n.props.task));return n.state={task:r,showRepeat:x(r.repeating_days),showDate:g(r.due_date),isDeleting:!1,isSaving:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.body.addEventListener("keydown",this.handleEscClick),this.dateInputRef.current&&this.setFlatpickr()}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keydown",this.handleEscClick),this.flatpickr&&this.flatpickr.destroy()}},{key:"componentDidUpdate",value:function(){this.dateInputRef.current&&this.setFlatpickr()}},{key:"setFlatpickr",value:function(){this.flatpickr&&this.flatpickr.destroy(),this.flatpickr=Object(P.a)(this.dateInputRef.current,{defaultDate:this.state.task.due_date||new Date,enableTime:!0,dateFormat:"Y-m-d H:i",altInput:!0,altFormat:"j F H:i",onChange:this.handleDateChange})}},{key:"renderRepeatingDays",value:function(e){var t=this;if(!this.state.showRepeat)return null;var a=Object.entries(e).map((function(e){var a=Object(R.a)(e,2),r=a[0],c=a[1];return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("input",{className:"visually-hidden card__repeat-day-input",type:"checkbox",id:"repeat-".concat(r,"-4"),name:"repeat",defaultValue:r,defaultChecked:c,onClick:function(){return t.handleDayClick(Object(U.a)({},r,!c))}}),Object(n.jsx)("label",{className:"card__repeat-day",htmlFor:"repeat-".concat(r,"-4"),children:r})]},"REPEATING_DAY ".concat(r))}));return Object(n.jsx)("fieldset",{className:"card__repeat-days",children:Object(n.jsx)("div",{className:"card__repeat-days-inner",children:a})},"RENDERED_DAYS")}},{key:"renderDate",value:function(e){return this.state.showDate?(e||(e=new Date),Object(n.jsx)("fieldset",{className:"card__date-deadline",children:Object(n.jsx)("label",{className:"card__input-deadline-wrap",children:Object(n.jsx)("input",{className:"card__date",type:"text",name:"date",defaultValue:new Date(e),ref:this.dateInputRef})})})):null}},{key:"renderColors",value:function(e){var t=this;return j.map((function(a){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("input",{type:"radio",id:"color-".concat(a,"-4"),className:"card__color-input card__color-input--".concat(a," visually-hidden"),name:"color",defaultValue:a,defaultChecked:e===a,onClick:function(){return t.handleColorPick(a)}}),Object(n.jsx)("label",{htmlFor:"color-".concat(a,"-4"),className:"card__color card__color--".concat(a),children:a})]},"COLOR ".concat(a))}))}},{key:"render",value:function(){var e=this.state.task,t=e.due_date,a=e.description,r=e.color,s=e.repeating_days;return Object(n.jsx)("article",{className:"card card--edit card--".concat(r," ").concat(this.state.showRepeat?"card--repeat":""),children:Object(n.jsx)("form",{className:"card__form",method:"get",children:Object(n.jsxs)("div",{className:"card__inner",children:[Object(n.jsx)("div",{className:"card__color-bar",children:Object(n.jsx)("svg",{className:"card__color-bar-wave",width:"100%",height:"10",dangerouslySetInnerHTML:{__html:'<use xlink:href="#wave"></use>'}})}),Object(n.jsx)("div",{className:"card__textarea-wrap",children:Object(n.jsx)("label",{children:Object(n.jsx)("textarea",{className:"card__text",placeholder:"Start typing your text here...",name:"text",value:a,onChange:this.handleDescriptionChange})})}),Object(n.jsxs)("div",{className:"card__settings",children:[Object(n.jsx)("div",{className:"card__details",children:Object(n.jsxs)("div",{className:"card__dates",children:[Object(n.jsxs)("button",{className:"card__date-deadline-toggle",type:"button",onClick:this.handleShowDateClick,children:["date:",Object(n.jsx)("span",{className:"card__date-status",children:this.state.showDate?"yes":"no"})]}),this.renderDate(t),Object(n.jsxs)("button",{className:"card__repeat-toggle",type:"button",onClick:this.handleShowRepeatClick,children:["repeat:",Object(n.jsx)("span",{className:"card__repeat-status",children:this.state.showRepeat?"yes":"no"})]}),this.renderRepeatingDays(s)]})}),Object(n.jsxs)("div",{className:"card__colors-inner",children:[Object(n.jsx)("h3",{className:"card__colors-title",children:"Color"}),Object(n.jsx)("div",{className:"card__colors-wrap",children:this.renderColors(r)})]})]}),Object(n.jsxs)("div",{className:"card__status-btns",children:[Object(n.jsx)("button",{className:"card__save",type:"submit",onClick:this.handleSaveButtonClick,disabled:this.state.showRepeat&&this.state.showDate||a.length<1||a.length>140||this.state.isSaving,children:this.state.isSaving?"Saving...":"Save"}),Object(n.jsx)("button",{className:"card__delete",type:"button",onClick:this.handleDeleteButtonClick,disabled:this.state.isDeleting,children:this.state.isDeleting?"Deleting...":"Delete"})]})]})})})}}]),a}(r.Component);var W=function(e){var t=e.onSortClick,a=Object.values(b).map((function(e){var a=e.split("-");return a[0]=a[0].toUpperCase(),a=a.join(" "),Object(n.jsxs)("a",{href:"#sort",className:"board__filter","data-sort-type":"sortType",onClick:function(){return t(e)},children:["SORT BY ",a]},"SORT ".concat(e))}));return Object(n.jsx)("div",{className:"board__filter-list",children:a})},K=function(e){Object(p.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={activeTask:null},e.handleArchiveButtonClick=function(){var t=Object(d.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object.assign({},a,{is_archived:!a.is_archived}),t.next=3,e.props.onTaskChange(a);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleFavoriteButtonClick=function(){var t=Object(d.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object.assign({},a,{is_favorite:!a.is_favorite}),t.next=3,e.props.onTaskChange(a);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleEditButtonClick=function(t){e.props.onModeChange(v),e.setState({activeTask:t})},e.handleSaveButtonClick=function(){var t=Object(d.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.mode!==v){t.next=5;break}return t.next=3,e.props.onTaskChange(a);case 3:t.next=8;break;case 5:if(e.props.mode!==m){t.next=8;break}return t.next=8,e.props.onTaskChange(null,a);case 8:e.props.onModeChange(_),e.setState({activeTask:null});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleDeleteButtonClick=function(){var t=Object(d.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.mode!==v){t.next=3;break}return t.next=3,e.props.onTaskChange(a,null);case 3:e.props.onModeChange(_),e.setState({activeTask:null});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleEditCancel=function(){e.props.onModeChange(_),e.setState({activeTask:null})},e}return Object(h.a)(a,[{key:"renderBoard",value:function(){var e=this;if(this.props.tasks&&0!==this.props.tasks.length||this.props.mode===m){var t=this.props.tasks.map((function(t){var a=JSON.parse(JSON.stringify(t));return e.props.mode===v&&e.state.activeTask&&a.id===e.state.activeTask.id?Object(n.jsx)(J,{task:a,onSaveButtonClick:e.handleSaveButtonClick,onDeleteButtonClick:e.handleDeleteButtonClick,onEditCancel:e.handleEditCancel},"EDIT_TASK ".concat(t.id)):Object(n.jsx)(I,{task:a,onArchiveButtonClick:e.handleArchiveButtonClick,onFavoriteButtonClick:e.handleFavoriteButtonClick,onEditButtonClick:e.handleEditButtonClick},"TASK ".concat(t.id))})).slice(0,this.props.currentTaskAmount);return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(W,{onSortClick:this.props.onSortClick}),Object(n.jsxs)("div",{className:"board__tasks",children:[this.renderAddTask(),t]}),this.renderLoadMoreButton()]})}if(this.props.tasks&&0===this.props.tasks.length)return Object(n.jsx)("p",{className:"board__no-tasks",children:"Click \xabADD NEW TASK\xbb in menu to create your first task"})}},{key:"renderAddTask",value:function(){if(this.props.mode===m){var e=JSON.parse(JSON.stringify(Y));return Object(n.jsx)(J,{task:e,onSaveButtonClick:this.handleSaveButtonClick,onDeleteButtonClick:this.handleDeleteButtonClick,onEditCancel:this.handleEditCancel},"ADD_TASK")}return null}},{key:"renderLoadMoreButton",value:function(){return this.props.currentTaskAmount===this.props.tasks.length?null:Object(n.jsx)(F,{onLoadMoreButtonClick:this.props.onLoadMoreButtonClick})}},{key:"render",value:function(){return Object(n.jsx)("section",{className:"board container",children:this.renderBoard()})}}]),a}(r.Component);var H=function(e){var t=null;switch(e.error){case O:t="Your network connection is lost. Try again later.";break;default:t="Loading..."}return Object(n.jsx)("p",{className:"board__no-tasks",children:t})},G=a(26),q=a.n(G);var z=function(e){var t=e.tasks,a=Object(r.useRef)(),s=Object(r.useState)(t),c=Object(R.a)(s,2),i=c[0],o=c[1];return Object(r.useEffect)((function(){var e,a=function(e){var a=Object(R.a)(e,2),n=a[0],r=a[1];o(t.filter((function(e){return function(e,t,a){return e>t&&e<a}(new Date(e.due_date),n,r)})))},n=(e=".statistic__period-input",Object(P.a)(e,{mode:"range",altInput:!0,altFormat:"F j",onChange:a}));return function(){n.destroy()}}),[t]),Object(r.useEffect)((function(){var e=function(e){var t=new Map;return e.forEach((function(e){var a=e.color;a=a[0].toUpperCase()+a.slice(1),t.set(a,t.get(a)+1||1)})),[Array.from(t.keys()),Array.from(t.values())]}(i),t=Object(R.a)(e,2),n=t[0],r=t[1],s=a.current,c=new q.a(s,{type:"doughnut",data:{labels:n,datasets:[{label:"# of tasks",data:r,backgroundColor:N(n),borderColor:n,borderWidth:1}]}});return function(){c.destroy()}}),[i]),Object(n.jsxs)("section",{className:"statistic container",children:[Object(n.jsx)("div",{className:"statistic__line",children:Object(n.jsxs)("div",{className:"statistic__period",children:[Object(n.jsx)("h2",{className:"statistic__period-title",children:"Task Activity DIAGRAM"}),Object(n.jsx)("div",{className:"statistic-input-wrap",children:Object(n.jsx)("input",{className:"statistic__period-input",type:"text",placeholder:"01 Feb - 08 Feb"})}),Object(n.jsxs)("p",{className:"statistic__period-result",children:["In total for the specified period ",i.length," tasks were fulfilled."]})]})}),Object(n.jsx)("div",{className:"statistic__circle",children:Object(n.jsx)("div",{className:"statistic__colors-wrap",children:Object(n.jsx)("canvas",{className:"statistic__colors",width:"400",height:"300",ref:a})})})]})},Q=function(e){Object(p.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleLoadMoreButtonClick=function(e){e.preventDefault();var t=n.taskModel.getTasks({filter:n.state.filter}).length,a=Math.min(t,n.state.currentTaskAmount+8);n.setState({currentTaskAmount:a})},n.handleSortClick=function(e){switch(e){case b.DEFAULT:n.setState({sortType:b.DEFAULT});break;case b.DATE_UP:n.setState({sortType:b.DATE_UP});break;case b.DATE_DOWN:n.setState({sortType:b.DATE_DOWN})}},n.handleFilterClick=function(e){var t=n.taskModel.getTasks({filter:e}).length,a=Math.min(t,8);n.setState({filter:e,currentTaskAmount:a})},n.handleTaskChange=function(){var e=Object(d.a)(l.a.mark((function e(t,a){var r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==a){e.next=5;break}return e.next=3,n.taskModel.deleteTask(t);case 3:e.next=12;break;case 5:if(null!==t){e.next=10;break}return e.next=8,n.taskModel.addTask(a);case 8:e.next=12;break;case 10:return e.next=12,n.taskModel.updateTask(t);case 12:return e.next=14,n.taskModel.receiveTasksData();case 14:r=n.taskModel.getTasks({filter:n.state.filter}).length,s=r<=8?r:n.state.currentTaskAmount,n.setState({currentTaskAmount:s});case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.handleAddNewTaskClick=function(){if(!n.state.error){var e=f.ALL,t=n.taskModel.getTasks({filter:e}).length,a=Math.min(t,8);n.setState({mode:m,sortType:b.DEFAULT,filter:e,currentTaskAmount:a,showStats:!1})}},n.handleStatisticsClick=function(){n.setState({showStats:!0})},n.handleTasksClick=function(){n.setState({showStats:!1})},n.handleModeChange=function(e){n.setState({mode:e})},n.state={filter:f.ALL,sortType:b.DEFAULT,mode:_,currentTaskAmount:null,error:null,showStats:!1},n.liveUpdate=setInterval((function(){n.taskModel.receiveTasksData().then((function(){var e=n.taskModel.getTasks({filter:n.state.filter}).length,t=e<=8?e:n.state.currentTaskAmount;n.setState({currentTaskAmount:t})}))}),2500),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.taskModel=new A,this.taskModel.receiveTasksData().then((function(){if(e.taskModel.getTasks()){var t=Math.min(e.taskModel.getTasks().length,8);e.setState({currentTaskAmount:t})}else e.setState({error:O})}))}},{key:"renderContent",value:function(){if(this.state.showStats&&this.taskModel&&this.taskModel.getTasks())return Object(n.jsx)(z,{tasks:this.taskModel.getTasks()});if(this.taskModel&&this.taskModel.getTasks()){var e=this.taskModel.getTasks({filter:this.state.filter,sortType:this.state.sortType});return Object(n.jsx)(K,{tasks:e,mode:this.state.mode,currentTaskAmount:this.state.currentTaskAmount,onLoadMoreButtonClick:this.handleLoadMoreButtonClick,onSortClick:this.handleSortClick,onTaskChange:this.handleTaskChange,onModeChange:this.handleModeChange})}return Object(n.jsx)(H,{error:this.state.error})}},{key:"render",value:function(){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("section",{className:"main__control control container",children:[Object(n.jsx)("h1",{className:"control__title",children:"TASKMANAGER"}),Object(n.jsx)(E,{onAddNewTaskClick:this.handleAddNewTaskClick,onTasksClick:this.handleTasksClick,onStatisticsClick:this.handleStatisticsClick})]}),Object(n.jsx)(M,{taskModel:this.taskModel,currentFilter:this.state.filter,onFilterClick:this.handleFilterClick,showStats:this.state.showStats}),this.renderContent()]})}}]),a}(r.Component);i.a.render(Object(n.jsx)(Q,{}),document.querySelector(".main"))}},[[54,1,2]]]);
//# sourceMappingURL=main.65716fbf.chunk.js.map